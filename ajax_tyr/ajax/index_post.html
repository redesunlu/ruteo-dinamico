<!DOCTYPE html>
<html>
    
    <head>
        
        <title>Ejemplo en AJAX</title>
        
        <script>
            
            function peticion_ajax() {
                
                // Instancia de un objeto ajax (No funcion en versiones anteriores a IE7)
                xmlhttp=new XMLHttpRequest();
                
                // Configuramos al objeto para que trabaje de forma asincronica
                xmlhttp.onreadystatechange = function() {
                    
                    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                        
                        document.getElementById("div_prueba").innerHTML=xmlhttp.responseText;
                        
                    }
                    
                }
                
                // Nos fijamos si hay parametros
                informacion_para_enviar = document.getElementById("parametro").value;
                
                if ( informacion_para_enviar ) {
                    
                    // si hay parametros, los enviamos
                    var params = "envio_post=si&data="+informacion_para_enviar;
                    
                    // Armamos la peticion
                    xmlhttp.open("POST","server.php",true);
                    
                    // Este header de http se setea para que envie los datos por post
                    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                    
                    // Este es un header opcional
                    xmlhttp.setRequestHeader("Content-length", params.length);
                    
                    // Se envia la peticion con los parametros del post
                    xmlhttp.send(params);
                    
                } else {
                    
                    // Si no hay parametros, enviamos post vacio
                    
                    // Armamos la peticion
                    xmlhttp.open("POST","server.php",true);
                    
                    // Se envia la peticion
                    xmlhttp.send();
                    
                }
                
                
            }
            
        </script>
        
    </head>
    
    <body>
        
        <div id="div_prueba">
            
            <h2>Presionar el boton</h2>
            
        </div>
        
        <p>Decile algo al servidor: </p>
        
        <input id="parametro"></input><br />
        
        <!-- Boton que dispara la peticion via ajax cuando se dispara el evento onclick -->
        <button type="button" onclick="peticion_ajax()">Enviar!</button>
        
        <p>Ejemplo extraido de http://www.w3schools.com/ajax/ - TyR 2013</p>
        
    </body>
    
</html> 
